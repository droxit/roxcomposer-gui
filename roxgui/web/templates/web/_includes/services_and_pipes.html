{% block services_and_pipes %}

<div class="container">
    <!-- Services -->
    <div class="row">
        <div class="col-md-8">
            <div class="card w-auto" style="width: 18rem;height:300px; overflow-y:scroll;">
              <div class="card-body">
                <h5 class="card-title">Running Services</h5>
                  <div class="card-columns">
                    {% for key, value in running_services_dict.items %}
                      <div class="card" data-value_info="{{ value }}" >
                          <div class="card-body">
                              <div class="row">
                                  <div class="col-md-7">
                                    {{ key }}
                                  </div>
                                  <div class="col-md-2">
                                      {% if request.session|get_watch_toggled:key == True %}
                                          <button type="button" onclick="watch(this)" data-value_name="{{ key }}" class="btn btn-primary focus active" data-toggle="button" aria-pressed="true" autocomplete="off">
                                              w
                                           </button>
                                      {% else %}
                                            <button type="button" onclick="watch(this)" data-value_name="{{ key }}" class="btn btn-primary" data-toggle="button" aria-pressed="false" autocomplete="off">
                                              w
                                           </button>
                                      {% endif %}
                                  </div>
                                  <div class="col-md-2">
                                      <button type="button" onclick="stop_service(this)" data-value_name="{{ key }}" class="btn btn-primary" data-toggle="button" aria-pressed="false" autocomplete="off">
                                          x
                                      </button>
                                  </div>
                              </div>
                          </div>
                      </div>
                    {% endfor %}
                  </div>
              </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card w-auto" style="width: 18rem;height:300px;overflow-y:scroll;">
              <div class="card-body">
                  <ul class="list-group">
                      {% for key, value in available_services_dict.items %}
                        <li class="list-group-item border-0" onclick="run_service(this)" data-value_name="{{ key }}" value="{{ value }}">{{ key }}</li>
                        
                      {% endfor %}

                    </ul>
              </div>
            </div>
        </div>
    </div>

    <!-- Pipes -->
    <div class="row">
        <div class="col-md-8">
            <div class="card w-auto" style="width: 18rem;height:300px">
              <div class="card-body">
                  {% if selected_pipe %}
                    {% if selected_pipe_active == True %}
                        <h5 class="card-title">{{ selected_pipe }} <small class="form-text">Active</small></h5>
                    {% else %}
                         <h5 class="card-title text-muted">{{ selected_pipe }} <small class="form-text text-muted">Inactive</small></h5>
                    {% endif %}
                  <div class="row">
                      <div class="col-md-7">
                        <form action="post_to_pipeline" method="post" id="post_to_pipeline">
                            <input type="hidden" name="pipe_name" value="{{ selected_pipe }}">
                            {% csrf_token %}
                            <div class="col-lg-6">
                                <ul class="list-group">
                                    {% for name in selected_pipe_services %}
                                    <li class="list-group-item">{{ name }}</li>
                                    {% endfor %}
                                </ul>
                                <small id="pipeHelp" class="form-text text-muted">Services in this pipeline</small>
                            </div>
                        </form>
                    </div>
                      <div class="col-md-5">
                          <div class="container">
                            <div class="row">
                                <div class="col-lg-9">
                                    <label for="msg_text" class="sr-only">Message</label>
                                    <input form="post_to_pipeline" type="text" class="form-control" name="pipe_message_text"
                                           id="msg_text"
                                           placeholder="Message">
                                </div>
                                <div class="col-lg-3">
                                    <button type="submit" form="post_to_pipeline" class="btn btn-default">Send</button>
                                </div>
                            </div>
                          </div>
                    </div>
                  </div>
                  {% else %}
                    Select a pipeline to view options.
                  {% endif%}
              </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card w-auto" style="width: 18rem;height:300px;overflow-y:scroll;">
              <div class="card-body">
                  <ul class="list-group">
                    {% for data in pipeline_data %}
                        {% if data.2 == True %}
                            <li class="list-group-item border-0" onclick="show_pipeline(this)" data-value_name="{{ data.0 }}" data-value_services="{{ data.1 }}" data-value_active="{{data.2}}">{{ data.0 }}</li>
                        {% else %}
                            <li class="list-group-item border-0 text-muted" onclick="show_pipeline(this)" data-value_name="{{ data.0 }}" data-value_services="{{ data.1 }}" data-value_active="{{data.2}}">{{ data.0 }}</li>
                        {% endif %}

                      {% endfor %}
                  </ul>
              </div>
            </div>
        </div>
    </div>
</div>


{% endblock %}