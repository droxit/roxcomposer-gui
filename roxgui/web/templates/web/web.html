<!-- Main web page. -->

{% extends "base/base.html" %}

{% load static %}
{% load custom_filters %}

{% block title %}
<title>ROXcomposer</title>
<link rel="stylesheet" type="text/css" href="{% static 'web/css/web.css' %}">
{% endblock title %}

{% block content %}
<h1>Welcome!</h1>
{% if messages %}
<div class="alert alert-warning">
    <strong>Error concerning:</strong>
    {% for message in messages %}
    {{ message }}
    {% endfor %}
</div>
{% endif %}
<div class="pipes_and_services">
    {% if available_service_names %}
    <form action="start_service" method="post">
        {% csrf_token %}
        <select name="available_service_names" multiple>
            {% for name in available_service_names %}
            <option value="{{ name }}">{{ name }}</option>
            {% endfor %}
        </select>
        <input type="submit" value="Start">
    </form>
    <form action="stop_service" method="post">
        {% csrf_token %}
        <select name="running_service_names" multiple>
            {% for name in running_service_names %}
            <option value="{{ name }}">{{ name }}</option>
            {% endfor %}
        </select>
        <input type="submit" value="Stop">
    </form>
    {% else %}
    <p>No services available.</p>
    {% endif %}
</div>
<div class="pipes_and_services">
    {% if pipeline_names %}
        <ul>
            {% for pipe in pipeline_names %}
                {% if True %}
                    <li>{{pipe}}
                        {% with p=pipelines|get_item:pipe%}
                        {{p|get_type}}
                        {{p}}
                        {{p|get_item:p.active}}
                        {% endwith%}
                    </li>
                {% else %}
                    <li>{{pipe}} Inactive</li>
                {% endif %}
            {% endfor %}
        </ul>
    {% else %}
        <p>No pipelines set</p>
    {% endif %}
</div>
<script src="{% static 'web/js/web.js'%}"></script>
{% endblock content %}
